{"version":3,"sources":["board.js"],"names":[],"mappings":"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","file":"board-compiled.js","sourcesContent":["class Board {\n    constructor() {\n        this.tiles = [[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];\n        this.addRandom();\n    }\n    print() {\n        this.tiles.map(x => x.join(' ')).map(x => console.log(x));\n    }\n    addRandom() {\n        let empty = [];\n        this.tiles.forEach(function(x,i) {\n            x.forEach(function(y,j) {\n                if(y == 0)\n                    empty.push([i,j]);\n            });\n        });\n        const random = empty[Math.floor(Math.random()*empty.length)];\n        this.tiles[random[0]][random[1]] = 2\n    }\n    slideLeft() {\n        let w = false;\n        let tiles = [[],[],[],[]];\n        this.tiles.forEach(function(x,i){\n            let r = x.filter(x => x!=0 );\n            for (let j =0; j < r.length; j++) {\n                if(!r[j]) {continue;}\n                if(r[j]==r[j+1]) {\n                    tiles[i].push(2 * r[j]);\n                    if(2 * r[j] == 2048)\n                        w = true;\n                    r[j+1] = false;\n                }\n                else\n                    tiles[i].push(r[j]);\n            }\n        });\n        tiles.forEach(function(x,i) {\n            for(let j = x.length; j<4;j++)\n                tiles[i].push(0);\n        });\n        //compare two arrays\n        if(JSON.stringify(this.tiles) != JSON.stringify(tiles)) {\n            this.tiles = tiles;\n            this.addRandom();\n        }\n        return w;\n    }\n    rotateLeft() {\n        function getCol(arr, col) {\n            let column = [];\n            for(let i=0; i<arr.length; i++){\n                column.push(arr[i][col]);\n            }\n            return column;\n        }\n        this.tiles = [getCol(this.tiles,3), getCol(this.tiles,2),\n            getCol(this.tiles,1),getCol(this.tiles,0)];\n    }\n    slide(direction) {\n        /*  1\n          0   2\n            3   */\n        for(let i = 0; i < direction; i++)\n            this.rotateLeft();\n        let w = this.slideLeft();\n        for (let i = direction; i < 4; i++) {\n            this.rotateLeft();\n        }\n        return w;\n    }\n    hasLost () {\n        let canMove = false;\n        let deltaX = [-1, 0, 1, 0];\n        let deltaY = [0, -1, 0, 1];\n        for (let i = 0; i < 4; i++) {\n            for (let j =0; j < 4; j++) {\n                canMove |= (this.tiles[i][j] == 0);\n                for (let k = 0; k < 4; k++) {\n                    var newRow = i + deltaX[k];\n                    var newColumn = j + deltaY[k];\n                    if (newRow < 0 || newRow >= 4 || newColumn < 0\n                        || newColumn >= 4) {\n                        continue;\n                    }\n                    canMove|= (this.tiles[i][j]==this.tiles[newRow][newColumn]);\n                }\n            }\n        }\n        return !canMove;\n    }\n}\nclass Game {\n    constructor() {\n        this.board = new Board();\n    }\n    slide(direction) {\n        if(this.board.slide(direction)) {\n            //TODO: Výhra\n            alert(\"Výhra\");\n        }\n        else if(this.board.hasLost()) {\n            //TODO: Prohra\n            alert(\"Prohra\");\n        }\n        this.board.print();\n    }\n    restart() {\n        this.board = new Board();\n    }\n}\nlet g = new Game();"]}